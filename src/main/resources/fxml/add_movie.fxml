<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.*?>
<?import javafx.scene.image.*?>

<BorderPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" 
            fx:controller="com.cinema.controller.AddMovieController"
            styleClass="main-background">
    
    <top>
        <HBox alignment="CENTER_LEFT" spacing="20" styleClass="header-bar">
            <padding>
                <Insets top="15" right="30" bottom="15" left="30"/>
            </padding>
            
            <!-- Back Button -->
            <Button text="â† Back" onAction="#handleBack" styleClass="btn-back"/>
            
            <Region HBox.hgrow="ALWAYS"/>
            
            <Label text="Add New Movie" styleClass="header-movie-title"/>
            
            <Region HBox.hgrow="ALWAYS"/>
        </HBox>
    </top>
    
    <center>
        <ScrollPane fitToWidth="true" fitToHeight="true" styleClass="form-scroll-pane">
            <VBox alignment="TOP_CENTER" spacing="30">
                <padding>
                    <Insets top="30" right="50" bottom="30" left="50"/>
                </padding>
                
                <!-- Movie Details Section -->
                <HBox alignment="CENTER" spacing="40">
                    <!-- Image URL Section -->
                    <VBox alignment="CENTER" spacing="15">
                        <StackPane fx:id="imageContainer" styleClass="image-upload-container" 
                                   prefWidth="200" prefHeight="280">
                            <Rectangle width="200" height="280" styleClass="image-placeholder" 
                                       arcWidth="10" arcHeight="10"/>
                            <ImageView fx:id="posterPreview" fitWidth="200" fitHeight="280" preserveRatio="true"/>
                            <VBox fx:id="placeholderBox" alignment="CENTER" spacing="10">
                                <Label text="ðŸ“·" style="-fx-font-size: 36px;"/>
                                <Label text="Enter URL below" styleClass="upload-hint"/>
                            </VBox>
                        </StackPane>
                        <Button text="Preview Image" onAction="#handlePreviewImage" styleClass="btn-secondary"/>
                    </VBox>
                    
                    <!-- Movie Info Fields -->
                    <VBox spacing="12" styleClass="add-movie-form" minWidth="350">
                        <padding>
                            <Insets top="15" right="25" bottom="15" left="25"/>
                        </padding>
                        
                        <Label text="Movie Details" styleClass="section-title"/>
                        
                        <!-- Movie Title -->
                        <VBox spacing="3">
                            <Label text="Movie Title" styleClass="field-label"/>
                            <TextField fx:id="titleField" promptText="Enter movie title" styleClass="text-field-custom"/>
                        </VBox>
                        
                        <!-- Image URL -->
                        <VBox spacing="3">
                            <Label text="Poster Image URL" styleClass="field-label"/>
                            <TextField fx:id="imageUrlField" promptText="https://example.com/poster.jpg" styleClass="text-field-custom"/>
                        </VBox>
                        
                        <!-- Genre -->
                        <VBox spacing="3">
                            <Label text="Genre" styleClass="field-label"/>
                            <TextField fx:id="genreField" promptText="e.g., Action, Drama, Comedy" styleClass="text-field-custom"/>
                        </VBox>
                        
                        <HBox spacing="15">
                            <!-- Duration -->
                            <VBox spacing="3" HBox.hgrow="ALWAYS">
                                <Label text="Duration (min)" styleClass="field-label"/>
                                <TextField fx:id="durationField" promptText="e.g., 120" styleClass="text-field-custom"/>
                            </VBox>
                            
                            <!-- Rating -->
                            <VBox spacing="3" HBox.hgrow="ALWAYS">
                                <Label text="Rating" styleClass="field-label"/>
                                <ComboBox fx:id="ratingComboBox" promptText="Select" styleClass="combo-box-custom" maxWidth="Infinity"/>
                            </VBox>
                        </HBox>
                    </VBox>
                </HBox>
                
                <!-- Screenings Section -->
                <VBox spacing="15" styleClass="add-movie-form" maxWidth="700">
                    <padding>
                        <Insets top="15" right="25" bottom="15" left="25"/>
                    </padding>
                    
                    <HBox alignment="CENTER_LEFT">
                        <Label text="Screenings" styleClass="section-title"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Button text="+ Add Screening" onAction="#handleAddScreening" styleClass="btn-secondary"/>
                    </HBox>
                    
                    <!-- Screenings Container -->
                    <VBox fx:id="screeningsContainer" spacing="10">
                        <!-- Screenings will be added here dynamically -->
                    </VBox>
                </VBox>
                
                <!-- Error Label -->
                <Label fx:id="errorLabel" styleClass="error-label" wrapText="true"/>
                
                <!-- Add Movie Button -->
                <Button text="ADD MOVIE" onAction="#handleAddMovie" styleClass="btn-primary" prefWidth="200" prefHeight="45"/>
                
                <Region prefHeight="20"/>
            </VBox>
        </ScrollPane>
    </center>
</BorderPane>
